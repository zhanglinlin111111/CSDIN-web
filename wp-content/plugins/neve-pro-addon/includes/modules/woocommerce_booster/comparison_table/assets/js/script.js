(()=>{"use strict";function t(){return null!==document.getElementById("nv-ct-products")}function e(t){return neveWooBooster.comparisonTable.tableURL.replace("product-ids-placeholder",t.join(","))}function n(t){t=t.sort();const n=document.querySelector(".ct-sticky-col.nv-ct-col-button a");n&&(n.href=e(t))}function c(t){document.getElementById("scroll-to-top")&&(document.getElementById("scroll-to-top").style.bottom=t)}function o(){if(!t())return;p()>0?(document.getElementsByClassName("nv-ct-sticky-bar")[0].classList.remove("hidden"),setTimeout((()=>{c(document.getElementsByClassName("nv-ct-sticky-bar")[0].offsetHeight+30+"px")}),100)):(document.getElementsByClassName("nv-ct-sticky-bar")[0].classList.add("hidden"),c("30px"));const e=document.getElementsByClassName("sticky-add-to-cart");if(1===e.length&&e[0].classList.contains("sticky-add-to-cart--active")&&e[0].classList.contains("sticky-add-to-cart-bottom")){const t=document.getElementsByClassName("sticky-add-to-cart")[0].offsetHeight;document.getElementsByClassName("nv-ct-sticky-bar")[0].style.bottom=t+"px"}}function r(){t()&&(1===p()?(document.querySelector(".nv-ct-sticky-bar .nv-ct-col-button .min-prod").classList.remove("nv-ct-hide-element"),document.querySelector(".nv-ct-sticky-bar .nv-ct-col-button .nv-ct-compare-btn-wrapper").classList.add("nv-ct-hide-element")):(document.querySelector(".nv-ct-sticky-bar .nv-ct-col-button .min-prod").classList.add("nv-ct-hide-element"),document.querySelector(".nv-ct-sticky-bar .nv-ct-col-button .nv-ct-compare-btn-wrapper").classList.remove("nv-ct-hide-element")))}function s(){return _.pluck(i(),"id")}function i(){const t=localStorage.getItem("nv_ct_products");return null===t?[]:JSON.parse(t)}function a(t){const e=i();for(let n=0;n<e.length;n++)e[n].id===t&&(e.splice(n,1),n--);localStorage.setItem("nv_ct_products",JSON.stringify(e))}function l(e,n,c){if(!t())return;const o=document.querySelector("#nv-ct-product-template-container").cloneNode(!0);o.querySelector("button").value=e,o.querySelector(".nv-ct-product-image-wrapper").innerHTML='<a href="'+n+'"><img src="'+c+'" /></a>',o.querySelector(".nv-ct-sticky-bar-product-container").dataset.pid=e,o.style.display="block",document.getElementById("nv-ct-products").appendChild(o)}function d(){return p()<neveWooBooster.comparisonTable.numberOfProductsLimit}function u(){d()?document.body.classList.remove("nv-ct-product-limit-exceed"):document.body.classList.add("nv-ct-product-limit-exceed")}function m(e){if(!t())return;const n=document.querySelector('.nv-ct-sticky-bar-product-container[data-pid="'+e+'"]');n&&n.parentNode.remove()}function v(){if(!t())return;const e=p();document.getElementsByClassName("nv-ct-sticky-bar-total-product")[0].innerHTML=e}function p(){let t=i();return t=t.filter((t=>t.id>0)),t.length}function f(t,e,n=!1){let c='.nv-ct-compare-btn[data-pid="'+e+'"]';"all"===e&&(c=".nv-ct-compare-btn"),document.querySelectorAll(c).forEach((c=>{n&&s().includes(e)||c.classList[t]("nv-ct-item-added")}))}window.addEventListener("load",(function(){document.body.classList.contains("nv-ct-enabled")&&(u(),function(){const t=document.getElementById("nv-ct-products");null!==t&&(t.innerHTML="");const e=i(),c=[];e.forEach((e=>{c.push(e.id),null!==t&&l(e.id,e.url,e.image),f("add",e.id)})),n(c),v(),o(),r(),u()}(),document.addEventListener("click",(function(t){const c=t.target.closest("a");if(!c||!c.classList.contains("nv-ct-compare-btn"))return;t.preventDefault();const p=c.dataset,y=p.pid,b=p.url,g=p.img;if(function(t){const e=i();for(let n=0;n<e.length;n++)if(e[n].id===t)return!0;return!1}(y))return a(y),f("remove",y),m(y),v(),o(),r(),u(),n(s()),void(document.body.classList.contains("nv-ct-comparison-table-content")&&(window.location.href=e(s())));d()&&(function(t,e,n){const c=i();c.push({id:t,url:e,image:n}),localStorage.setItem("nv_ct_products",JSON.stringify(c))}(y,b,g),f("add",y),l(y,b,g),n(s()),v(),o(),r(),u(),document.body.classList.contains("nv-ct-comparison-table-content")&&(window.location.href=e(s())))})),function(){const t=document.querySelectorAll(".nv-ct .nv-ct-remove-product");for(let n=0;n<t.length;n++)t[n].addEventListener("click",(function(t){t.preventDefault();const n=this.value;u(),a(n),window.location.href=e(s())}))}(),t()&&document.addEventListener("click",(function(t){if(t.target&&t.target.classList.contains("nv-ct-remove-product")){t.preventDefault();const e=t.target.value;a(e),m(e),v(),o(),r(),n(s()),f("remove",e),u()}})),function(){const t=document.getElementsByClassName("nv-ct-clear-all");for(let e=0;e<t.length;e++)t[e].addEventListener("click",(function(t){t.preventDefault(),localStorage.removeItem("nv_ct_products"),v(),o(),r(),document.querySelectorAll("#nv-ct-products .nv-ct-sticky-bar-product-container").forEach((t=>t.parentNode.remove())),f("remove","all")}))}())}))})();